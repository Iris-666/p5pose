{"version":3,"sources":["sketch.js","index.js"],"names":["scale","width","height","p5","video","osc","setSketch","sketch","setup","createCanvas","select","createCapture","VIDEO","size","poseNet","ml5","hide","audioButton","createButton","position","mouseClicked","userStartAudio","then","remove","window","Oscillator","setType","freq","amp","start","startButton","on","drawPoses","draw","poses","translate","image","drawKeypoints","drawSkeleton","forEach","pose","keypoints","keypoint","x","document","getElementById","console","log","value","score","fill","noStroke","ellipse","y","skeleton","p1","p2","stroke","line","module","hot","accept","location","reload","s2","p5s"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["// import \"p5/lib/addons/p5.dom\";\n\nconst scale = 1;\nconst width = 640 * scale;\nconst height = 480 * scale;\n\n// setSketch sets this\nlet p5;\n\n// setup initializes this\nlet video;\nlet osc;\n\nexport function setSketch(sketch) {\n  p5 = sketch;\n}\n\nexport function setup() {\n  p5.createCanvas(width, height);\n  video = p5.select('video') || p5.createCapture(p5.VIDEO);\n  video.size(width, height);\n\n  // Create a new poseNet method with a single detection\n  const poseNet = ml5.poseNet(video, () => p5.select('#status').hide());\n\n  // Every time we get a new pose, draw it\n  \n  \n  \n\n  // Hide the video element, and just show the canvas\n  video.hide();\n\n  // backgroundColor = color(255,0,255);\n  const audioButton = p5.createButton('click to start audio');\n  audioButton.position(5, height + 100);\n  audioButton.mouseClicked(() => {\n    p5.userStartAudio().then(() => {\n      audioButton.remove();\n      osc = new window.p5.Oscillator();\n      // now you can call osc methods to make sound happen\n    });\n  });\n\n  osc = new window.p5.Oscillator();\n  osc.setType('sine');\n  osc.freq(240);\n  osc.amp(0.05);\n  osc.start();\n\n  const startButton = p5.createButton('click to start');\n  startButton.position(5, height + 80);\n  startButton.mouseClicked(() => {\n    poseNet.on('pose', drawPoses);\n      startButton.remove();\n  })   \n}\n\nexport function draw() {\n\n}\n\n\nfunction drawPoses(poses) {\n  p5.translate(width, 0); // move to far corner\n  p5.scale(-1.0, 1.0);\n  p5.image(video, 0, 0, video.width, video.height);\n  drawKeypoints(poses);\n  drawSkeleton(poses);\n}\n\n\n// Draw ellipses over the detected keypoints\nfunction drawKeypoints(poses) {\n  poses.forEach((pose) =>\n    pose.pose.keypoints.forEach((keypoint) => {\n      let x = document.getElementById(\"confidence\");\n      console.log(x.value)\n     \n      if (keypoint.score > x.value) {\n        p5.fill(225,107,140);\n        p5.noStroke();\n        p5.ellipse(keypoint.position.x, keypoint.position.y, 20, 10);\n       \n        \n      }\n    })\n  )\n}\n\nfunction drawSkeleton(poses) {\n    poses.forEach((pose) => {\n      pose.skeleton.forEach((skeleton) => {\n        const [p1, p2] = skeleton;\n        p5.stroke(255, 107, 140);\n        p5.line(p1.position.x, p1.position.y, p2.position.x, p2.position.y);\n      });\n    });\n}\n\n\n\n// export function clickButton(){\n//   var html =\"<input type=\\\"button\\\" value=\\\"click here to start\\\" onclick=\\\"poseNetOn();\\\">\";\n//   document.getElementById(\"click\").innerHTML=html;\n// }\n","// import p5 from 'p5';\nimport * as sketch from './sketch';\n\n// Force page refresh on hot reload\nif (module.hot) {\n    module.hot.accept(() => window.location.reload());\n}\n\nconst s2 = (p5s) => {\n  sketch.setSketch(p5s);\n  p5s.setup = () => sketch.setup(sketch);\n  p5s.draw = () => sketch.draw(sketch);\n}\n\nnew p5(s2, 'container');\n"]}